# üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ Shopee Popular Products Scraper

## üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (Popular/Trending Products) ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á Shopee Thailand (`shopee.co.th`) ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **Ulixee Hero** ‡πÄ‡∏õ‡πá‡∏ô headless browser framework

---

## üß© ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Ulixee Hero?

- Shopee ‡πÄ‡∏õ‡πá‡∏ô **SPA (Single Page Application)** ‡∏ó‡∏µ‡πà render ‡∏î‡πâ‡∏ß‡∏¢ JavaScript ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö **anti-bot / anti-scraping** ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î (‡∏ï‡∏£‡∏ß‡∏à fingerprint, captcha, rate limit)
- Hero ‡∏à‡∏≥‡∏•‡∏≠‡∏á browser ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏Å‡∏ß‡πà‡∏≤ Puppeteer/Playwright ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö bot ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **Human Emulation** ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤, delay ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
shopee-scraper/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js              # Entry point ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îú‚îÄ‚îÄ cloud-server.js       # Ulixee Cloud server (‡∏£‡∏±‡∏ô Hero ‡πÅ‡∏ö‡∏ö remote)
‚îÇ   ‚îú‚îÄ‚îÄ scraper/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shopee-hero.js    # Logic ‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö + navigate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scroll-handler.js # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ infinite scroll / lazy load
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ captcha-handler.js# ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏à‡∏≠ captcha/block
‚îÇ   ‚îú‚îÄ‚îÄ parser/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product-parser.js # Parse HTML ‚Üí structured data ‡∏î‡πâ‡∏ß‡∏¢ Cheerio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ category-parser.js# Parse ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json-writer.js    # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô JSON
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ csv-writer.js     # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô CSV
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ delay.js          # Random delay ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á human behavior
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.js         # Logging system
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ retry.js          # Retry logic ‡∏Å‡∏£‡∏ì‡∏µ fail
‚îÇ   ‚îî‚îÄ‚îÄ config/
‚îÇ       ‚îî‚îÄ‚îÄ settings.js       # ‡∏Ñ‡πà‡∏≤ config ‡∏ï‡πà‡∏≤‡∏á‡πÜ (timeout, selectors, etc.)
‚îú‚îÄ‚îÄ output/
‚îÇ   ‚îú‚îÄ‚îÄ products.json
‚îÇ   ‚îî‚îÄ‚îÄ products.csv
‚îî‚îÄ‚îÄ logs/
    ‚îî‚îÄ‚îÄ scraper.log
```

---

## üîÑ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Workflow)

### Step 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Ulixee Cloud Server

- ‡∏£‡∏±‡∏ô `cloud-server.js` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î Hero Cloud instance
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î port ‡πÅ‡∏•‡∏∞ max concurrent heroes

### Step 2: ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å Shopee

- ‡∏™‡∏£‡πâ‡∏≤‡∏á Hero instance ‡πÉ‡∏ô `shopee-hero.js`
- navigate ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `https://shopee.co.th`
- **‡∏£‡∏≠ page load ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå** ‚Üí ‡πÉ‡∏ä‡πâ `hero.waitForPaintingStable()` ‡∏´‡∏£‡∏∑‡∏≠ wait for specific element
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î viewport ‡πÄ‡∏õ‡πá‡∏ô desktop (1920√ó1080) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ layout ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°

### Step 3: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Popup / Modal

- Shopee ‡∏°‡∏±‡∏Å‡πÅ‡∏™‡∏î‡∏á **popup ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
- ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î popup ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° scrape
- Selector ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°: ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î popup, overlay backdrop

### Step 4: ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°

- Section "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°" / "Popular Products" ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
- ‡∏ï‡πâ‡∏≠‡∏á **scroll down** ‡πÄ‡∏û‡∏∑‡πà‡∏≠ trigger lazy loading
- ‡πÉ‡∏ä‡πâ `scroll-handler.js` ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡∏•‡∏∞ section ‡∏û‡∏£‡πâ‡∏≠‡∏° random delay
- ‡∏£‡∏≠‡∏à‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ render ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô parse

### Step 5: ‡∏î‡∏∂‡∏á HTML ‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°

- ‡πÉ‡∏ä‡πâ `hero.document.querySelector()` ‡∏´‡∏£‡∏∑‡∏≠ `querySelectorAll()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö section ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
- ‡∏î‡∏∂‡∏á `outerHTML` ‡∏Ç‡∏≠‡∏á product cards ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‡∏™‡πà‡∏á HTML ‡πÑ‡∏õ‡πÉ‡∏´‡πâ Cheerio ‡πÉ‡∏ô `product-parser.js`

### Step 6: Parse ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

- ‡πÉ‡∏ä‡πâ **Cheerio** ‡πÅ‡∏õ‡∏•‡∏á HTML ‚Üí structured data
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏î‡∏π‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Data Schema ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)

### Step 7: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Pagination / Load More

- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° "‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ infinite scroll
- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ ‚Üí ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠ scroll ‡∏ï‡πà‡∏≠ ‚Üí ‡∏£‡∏≠ load ‚Üí parse ‡πÄ‡∏û‡∏¥‡πà‡∏°
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î **max pages** ‡∏´‡∏£‡∏∑‡∏≠ **max products** ‡πÄ‡∏õ‡πá‡∏ô limit

### Step 8: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡∏á `output/products.json` ‡πÅ‡∏•‡∏∞ `output/products.csv`
- Log ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÑ‡∏î‡πâ

---

## üìä Data Schema ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

| ‡∏•‡∏≥‡∏î‡∏±‡∏ö | Field | ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|-------|-------|-----------|---------|
| 1 | `name` | string | "‡πÄ‡∏Ñ‡∏™‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå iPhone 15 Pro Max" |
| 2 | `price` | number | 199 |
| 3 | `originalPrice` | number \| null | 399 |
| 4 | `discount` | string \| null | "-50%" |
| 5 | `sold` | string | "‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß 1.2‡∏û‡∏±‡∏ô ‡∏ä‡∏¥‡πâ‡∏ô" |
| 6 | `rating` | number \| null | 4.8 |
| 7 | `image` | string (URL) | "https://cf.shopee.co.th/file/..." |
| 8 | `productUrl` | string (URL) | "https://shopee.co.th/product/..." |
| 9 | `shopName` | string \| null | "iCase Official" |
| 10 | `shopLocation` | string \| null | "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£" |
| 11 | `isMall` | boolean | true |
| 12 | `isPreferred` | boolean | false |
| 13 | `freeShipping` | boolean | true |
| 14 | `scrapedAt` | ISO datetime | "2026-02-18T10:30:00Z" |

---

## ‚öôÔ∏è Config ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î (`settings.js`)

| ‡∏Ñ‡πà‡∏≤ | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ | ‡∏Ñ‡πà‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ |
|-----|---------|---------|
| `BASE_URL` | URL ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å Shopee | `https://shopee.co.th` |
| `MAX_SCROLL_TIMES` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞ scroll | 10‚Äì20 |
| `SCROLL_DELAY_MS` | Delay ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á scroll (random range) | 1500‚Äì3000 ms |
| `PAGE_LOAD_TIMEOUT` | Timeout ‡∏£‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î | 30000 ms |
| `MAX_PRODUCTS` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ | 100‚Äì200 |
| `MAX_RETRIES` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á retry ‡∏Å‡∏£‡∏ì‡∏µ fail | 3 |
| `OUTPUT_DIR` | ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå | `./output` |
| `USER_AGENT` | ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô) | ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ Hero ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ |
| `HERO_CLOUD_PORT` | Port ‡∏Ç‡∏≠‡∏á Ulixee Cloud | 1818 |

---

## ‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠

### 1. Anti-Bot Detection
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Shopee ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö bot ‡∏î‡πâ‡∏ß‡∏¢ fingerprinting, behavioral analysis
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: Hero ‡∏°‡∏µ built-in human emulation ‚Üí ‡πÉ‡∏ä‡πâ random mouse movements, realistic scroll patterns, random delays ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á actions

### 2. Dynamic Content / Lazy Loading
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà render ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞ scroll ‡∏•‡∏á‡∏°‡∏≤‡∏ñ‡∏∂‡∏á
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: Scroll ‡∏ó‡∏µ‡∏•‡∏∞ viewport height ‚Üí `waitForElement` ‡πÉ‡∏´‡πâ product card ‡πÉ‡∏´‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è ‚Üí ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ scroll ‡∏ï‡πà‡∏≠

### 3. Popup / Overlay
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Modal ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô, ‡∏Ç‡∏≠ location, ‡∏Ç‡∏≠ login
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö popup selector ‚Üí click ‡∏õ‡∏¥‡∏î ‚Üí ‡πÉ‡∏™‡πà try-catch ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ popup

### 4. Rate Limiting
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡∏á‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏∞‡πÇ‡∏î‡∏ô block IP
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÉ‡∏™‡πà delay ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á request, ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ scrape ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô, ‡πÉ‡∏ä‡πâ proxy rotation (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)

### 5. Selector ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Shopee ‡πÉ‡∏ä‡πâ class name ‡πÅ‡∏ö‡∏ö hash ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å deploy
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÉ‡∏ä‡πâ **data-attribute selectors** ‡∏´‡∏£‡∏∑‡∏≠ **structural selectors** (‡πÄ‡∏ä‡πà‡∏ô parent-child relationship) ‡πÅ‡∏ó‡∏ô class name ‚Üí ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° fallback selectors ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß

### 6. Captcha / Verification
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏≠‡∏≤‡∏à‡πÄ‡∏à‡∏≠ captcha ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤ verify
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ captcha ‚Üí log warning ‚Üí retry ‡∏´‡∏•‡∏±‡∏á delay ‡∏ô‡∏≤‡∏ô ‚Üí ‡∏´‡∏£‡∏∑‡∏≠ skip ‡∏£‡∏≠‡∏ö‡∏ô‡∏±‡πâ‡∏ô

---

## üîÄ ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏£‡∏¥‡∏°: ‡πÉ‡∏ä‡πâ Shopee Internal API ‡πÅ‡∏ó‡∏ô

> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: Shopee ‡∏°‡∏µ API ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ fetch ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤ API Endpoint
1. ‡πÄ‡∏õ‡∏¥‡∏î Chrome DevTools ‚Üí Tab **Network**
2. ‡πÄ‡∏Ç‡πâ‡∏≤ shopee.co.th ‚Üí scroll ‡∏•‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà section ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°
3. Filter request ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô `XHR/Fetch` ‚Üí ‡∏°‡∏≠‡∏á‡∏´‡∏≤ endpoint ‡πÄ‡∏ä‡πà‡∏ô:
   - `https://shopee.co.th/api/v4/recommend/recommend?...`
   - `https://shopee.co.th/api/v4/search/search_items?...`
4. Copy request ‡πÄ‡∏õ‡πá‡∏ô cURL ‚Üí ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Hero/fetch call

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ
- ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡∏ï‡∏£‡∏á‡πÜ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á parse HTML
- ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏Å ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á render ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡∏ß‡πà‡∏≤ (‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö)

### ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢
- API ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ cookie/token ‡∏à‡∏≤‡∏Å browser session
- Endpoint ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á
- ‡∏≠‡∏≤‡∏à‡∏°‡∏µ rate limit ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡∏Å‡∏ß‡πà‡∏≤

### ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ú‡∏™‡∏° (Hybrid Approach)
1. ‡πÉ‡∏ä‡πâ Hero ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠ **‡πÑ‡∏î‡πâ valid session/cookies**
2. ‡∏î‡∏±‡∏Å Network request ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö API endpoint + headers
3. ‡πÉ‡∏ä‡πâ cookies ‡∏à‡∏≤‡∏Å Hero session ‡∏¢‡∏¥‡∏á API ‡∏ï‡∏£‡∏á‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ `fetch`
4. Parse JSON response ‚Üí ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á scroll + parse HTML

---

## üìÖ ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Development Plan)

| Phase | ‡∏á‡∏≤‡∏ô | ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ |
|-------|------|---------|
| **Phase 1** | Setup ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå + Cloud Server + Config | 0.5 ‡∏ß‡∏±‡∏ô |
| **Phase 2** | ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Shopee + ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ popup + scroll | 1 ‡∏ß‡∏±‡∏ô |
| **Phase 3** | ‡∏£‡∏∞‡∏ö‡∏∏ selectors ‡∏Ç‡∏≠‡∏á product cards + ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô parser | 1 ‡∏ß‡∏±‡∏ô |
| **Phase 4** | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ pagination / load more | 0.5 ‡∏ß‡∏±‡∏ô |
| **Phase 5** | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå JSON + CSV | 0.5 ‡∏ß‡∏±‡∏ô |
| **Phase 6** | Error handling, retry, logging | 0.5 ‡∏ß‡∏±‡∏ô |
| **Phase 7** | ‡∏ó‡∏î‡∏™‡∏≠‡∏ö + ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á delay/scroll behavior | 1 ‡∏ß‡∏±‡∏ô |
| **‡∏£‡∏ß‡∏°** | | **~5 ‡∏ß‡∏±‡∏ô** |

---

## üõ°Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°

1. **Terms of Service**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Shopee TOS ‡∏ß‡πà‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ scrape ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. **robots.txt**: ‡πÄ‡∏ä‡πá‡∏Ñ `https://shopee.co.th/robots.txt` ‡∏ß‡πà‡∏≤ disallow ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á
3. **Rate Limiting**: ‡∏≠‡∏¢‡πà‡∏≤‡∏¢‡∏¥‡∏á request ‡∏ñ‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ server ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡∏±‡∏Å
4. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•**: ‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢/‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠
5. **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**: ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤/‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï

---

## üìù ‡∏™‡∏£‡∏∏‡∏õ

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ **Ulixee Hero** ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Shopee ‡πÅ‡∏ö‡∏ö headless browser ‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á anti-bot ‡πÑ‡∏î‡πâ‡∏î‡∏µ ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö **Cheerio** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö parse HTML ‡πÄ‡∏õ‡πá‡∏ô structured data ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å **Hybrid Approach** (‡πÉ‡∏ä‡πâ Hero ‡∏à‡∏±‡∏ö session ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏¥‡∏á API ‡∏ï‡∏£‡∏á) ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£ parse HTML ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
